{
    "sourceFile": "src/components/domiciliation/DomiciliationPricing.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 4,
            "patches": [
                {
                    "date": 1752857223412,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1752858078465,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,4 +1,6 @@\n+import { useCart } from \"@/src/hooks/useCart\";\r\n+import { useToast } from \"@/src/hooks/useToast\";\r\n import { supabase } from \"@/src/integrations/supabase/client\";\r\n import { Session } from \"@supabase/supabase-js\";\r\n import { useRouter } from \"expo-router\";\r\n import React, { useEffect, useState } from \"react\";\r\n@@ -8,8 +10,10 @@\n   const router = useRouter();\r\n   const [engagementSociete, setEngagementSociete] = useState(false);\r\n   const [engagementAuto, setEngagementAuto] = useState(false);\r\n   const [session, setSession] = useState<Session | null>(null);\r\n+  const { toast } = useToast();\r\n+  const { addItem } = useCart();\r\n \r\n   useEffect(() => {\r\n     const {\r\n       data: { subscription },\r\n"
                },
                {
                    "date": 1752861814555,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -186,9 +186,9 @@\n   },\r\n   price: {\r\n     fontSize: 24,\r\n     fontWeight: \"bold\",\r\n-    color: \"#06b6d4\",\r\n+    color: \"#5cb9bc\",\r\n   },\r\n   perMonth: {\r\n     fontSize: 14,\r\n     fontWeight: \"normal\",\r\n@@ -210,9 +210,9 @@\n     marginVertical: 8,\r\n     gap: 8,\r\n   },\r\n   addButton: {\r\n-    backgroundColor: \"#06b6d4\",\r\n+    backgroundColor: \"#5cb9bc\",\r\n     paddingVertical: 12,\r\n     borderRadius: 8,\r\n     alignItems: \"center\",\r\n     marginTop: 8,\r\n"
                },
                {
                    "date": 1753099223208,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,5 @@\n-import { useCart } from \"@/src/hooks/useCart\";\r\n+import { useCart } from \"@/src/components/cart/CartContext\";\r\n import { useToast } from \"@/src/hooks/useToast\";\r\n import { supabase } from \"@/src/integrations/supabase/client\";\r\n import { Session } from \"@supabase/supabase-js\";\r\n import { useRouter } from \"expo-router\";\r\n"
                },
                {
                    "date": 1754403500030,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -79,9 +79,9 @@\n                     : \"domiciliation-mensuel-societe-normal\",\r\n                   title: \"Domiciliation Mensuelle - Société\",\r\n                   price: engagementSociete ? \"18,00\" : \"36,00\",\r\n                 })\r\n-              : router.push(\"/(tabs)/Login\" as any)\r\n+              : router.push(\"/(app)/Login\" as any)\r\n           }\r\n         >\r\n           <Text style={styles.buttonText}>\r\n             {session ? \"Ajouter au panier\" : \"Connectez-vous\"}\r\n@@ -122,9 +122,9 @@\n                     : \"domiciliation-mensuel-auto-entrepreneur-normal\",\r\n                   title: \"Domiciliation Mensuelle - Auto Entrepreneur\",\r\n                   price: engagementAuto ? \"12,00\" : \"24,00\",\r\n                 })\r\n-              : router.push(\"/(tabs)/Login\" as any)\r\n+              : router.push(\"/(app)/Login\" as any)\r\n           }\r\n         >\r\n           <Text style={styles.buttonText}>\r\n             {session ? \"Ajouter au panier\" : \"Connectez-vous\"}\r\n@@ -150,9 +150,9 @@\n                   id: \"domiciliation-mensuel-association\",\r\n                   title: \"Domiciliation Mensuelle - Association\",\r\n                   price: \"15,00\",\r\n                 })\r\n-              : router.push(\"/(tabs)/Login\" as any)\r\n+              : router.push(\"/(app)/Login\" as any)\r\n           }\r\n         >\r\n           <Text style={styles.buttonText}>\r\n             {session ? \"Ajouter au panier\" : \"Connectez-vous\"}\r\n"
                }
            ],
            "date": 1752857223412,
            "name": "Commit-0",
            "content": "import { supabase } from \"@/src/integrations/supabase/client\";\r\nimport { Session } from \"@supabase/supabase-js\";\r\nimport { useRouter } from \"expo-router\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { StyleSheet, Switch, Text, TouchableOpacity, View } from \"react-native\";\r\n\r\nconst DomiciliationPricing = () => {\r\n  const router = useRouter();\r\n  const [engagementSociete, setEngagementSociete] = useState(false);\r\n  const [engagementAuto, setEngagementAuto] = useState(false);\r\n  const [session, setSession] = useState<Session | null>(null);\r\n\r\n  useEffect(() => {\r\n    const {\r\n      data: { subscription },\r\n    } = supabase.auth.onAuthStateChange((_event, session) =>\r\n      setSession(session)\r\n    );\r\n    supabase.auth\r\n      .getSession()\r\n      .then(({ data: { session } }) => setSession(session));\r\n    return () => subscription.unsubscribe();\r\n  }, []);\r\n\r\n  const handleAddToCart = (offer: {\r\n    id: string;\r\n    title: string;\r\n    price: string;\r\n  }) => {\r\n    addItem({\r\n      id: offer.id,\r\n      title: offer.title,\r\n      price: parseFloat(offer.price.replace(\",\", \".\")),\r\n      quantity: 1,\r\n    });\r\n\r\n    toast({\r\n      title: \"Produit ajouté au panier\",\r\n      description: `${offer.title} a été ajouté à votre panier.`,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <View style={styles.grid}>\r\n      {/* Société */}\r\n      <View style={styles.card}>\r\n        <Text style={styles.cardTitle}>Sociétés - Artisans - Commerçants</Text>\r\n        <Text style={styles.price}>\r\n          {engagementSociete ? \"18€\" : \"36€\"}\r\n          <Text style={styles.perMonth}> /mois</Text>\r\n        </Text>\r\n        <Text style={styles.description}>\r\n          Pour un engagement de plus de 6 mois, bénéficiez de 50% de réduction\r\n          sur votre premier trimestre.\r\n        </Text>\r\n        {engagementSociete && (\r\n          <Text style={styles.promoText}>Soit 18€ vos 3 premiers mois !</Text>\r\n        )}\r\n\r\n        <View style={styles.switchRow}>\r\n          <Switch\r\n            value={engagementSociete}\r\n            onValueChange={(value) => setEngagementSociete(value)}\r\n          />\r\n          <Text>Je m'engage pour plus de 6 mois</Text>\r\n        </View>\r\n\r\n        <TouchableOpacity\r\n          style={session ? styles.addButton : styles.disabledButton}\r\n          onPress={() =>\r\n            session\r\n              ? handleAddToCart({\r\n                  id: engagementSociete\r\n                    ? \"domiciliation-mensuel-societe-reduit\"\r\n                    : \"domiciliation-mensuel-societe-normal\",\r\n                  title: \"Domiciliation Mensuelle - Société\",\r\n                  price: engagementSociete ? \"18,00\" : \"36,00\",\r\n                })\r\n              : router.push(\"/(tabs)/Login\" as any)\r\n          }\r\n        >\r\n          <Text style={styles.buttonText}>\r\n            {session ? \"Ajouter au panier\" : \"Connectez-vous\"}\r\n          </Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n\r\n      {/* Auto-Entrepreneur */}\r\n      <View style={styles.card}>\r\n        <Text style={styles.cardTitle}>Auto-Entrepreneurs</Text>\r\n        <Text style={styles.price}>\r\n          {engagementAuto ? \"12€\" : \"24€\"}\r\n          <Text style={styles.perMonth}> /mois</Text>\r\n        </Text>\r\n        <Text style={styles.description}>\r\n          Pour un engagement de plus de 6 mois, bénéficiez de 50% de réduction\r\n          sur votre premier trimestre.\r\n        </Text>\r\n        {engagementAuto && (\r\n          <Text style={styles.promoText}>Soit 12€ vos 3 premiers mois !</Text>\r\n        )}\r\n\r\n        <View style={styles.switchRow}>\r\n          <Switch\r\n            value={engagementAuto}\r\n            onValueChange={(value) => setEngagementAuto(value)}\r\n          />\r\n          <Text>Je m'engage pour plus de 6 mois</Text>\r\n        </View>\r\n\r\n        <TouchableOpacity\r\n          style={session ? styles.addButton : styles.disabledButton}\r\n          onPress={() =>\r\n            session\r\n              ? handleAddToCart({\r\n                  id: engagementAuto\r\n                    ? \"domiciliation-mensuel-auto-entreprise-reduit\"\r\n                    : \"domiciliation-mensuel-auto-entrepreneur-normal\",\r\n                  title: \"Domiciliation Mensuelle - Auto Entrepreneur\",\r\n                  price: engagementAuto ? \"12,00\" : \"24,00\",\r\n                })\r\n              : router.push(\"/(tabs)/Login\" as any)\r\n          }\r\n        >\r\n          <Text style={styles.buttonText}>\r\n            {session ? \"Ajouter au panier\" : \"Connectez-vous\"}\r\n          </Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n\r\n      {/* Associations */}\r\n      <View style={styles.card}>\r\n        <Text style={styles.cardTitle}>Associations</Text>\r\n        <Text style={styles.price}>\r\n          15€<Text style={styles.perMonth}> /mois</Text>\r\n        </Text>\r\n        <Text style={styles.description}>\r\n          Tarif spécial pour les associations.\r\n        </Text>\r\n\r\n        <TouchableOpacity\r\n          style={session ? styles.addButton : styles.disabledButton}\r\n          onPress={() =>\r\n            session\r\n              ? handleAddToCart({\r\n                  id: \"domiciliation-mensuel-association\",\r\n                  title: \"Domiciliation Mensuelle - Association\",\r\n                  price: \"15,00\",\r\n                })\r\n              : router.push(\"/(tabs)/Login\" as any)\r\n          }\r\n        >\r\n          <Text style={styles.buttonText}>\r\n            {session ? \"Ajouter au panier\" : \"Connectez-vous\"}\r\n          </Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  grid: {\r\n    flexDirection: \"column\",\r\n    gap: 16,\r\n    padding: 16,\r\n  },\r\n  card: {\r\n    backgroundColor: \"#fff\",\r\n    padding: 16,\r\n    borderRadius: 12,\r\n    shadowColor: \"#000\",\r\n    shadowOpacity: 0.1,\r\n    shadowOffset: { width: 0, height: 2 },\r\n    elevation: 4,\r\n    marginBottom: 16,\r\n  },\r\n  cardTitle: {\r\n    fontSize: 18,\r\n    fontWeight: \"bold\",\r\n    marginBottom: 8,\r\n  },\r\n  price: {\r\n    fontSize: 24,\r\n    fontWeight: \"bold\",\r\n    color: \"#06b6d4\",\r\n  },\r\n  perMonth: {\r\n    fontSize: 14,\r\n    fontWeight: \"normal\",\r\n    color: \"#555\",\r\n  },\r\n  description: {\r\n    fontSize: 12,\r\n    color: \"#666\",\r\n    marginVertical: 8,\r\n  },\r\n  promoText: {\r\n    fontSize: 14,\r\n    color: \"#16a34a\",\r\n    fontWeight: \"600\",\r\n  },\r\n  switchRow: {\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    marginVertical: 8,\r\n    gap: 8,\r\n  },\r\n  addButton: {\r\n    backgroundColor: \"#06b6d4\",\r\n    paddingVertical: 12,\r\n    borderRadius: 8,\r\n    alignItems: \"center\",\r\n    marginTop: 8,\r\n  },\r\n  disabledButton: {\r\n    backgroundColor: \"#aaa\",\r\n    paddingVertical: 12,\r\n    borderRadius: 8,\r\n    alignItems: \"center\",\r\n    marginTop: 8,\r\n  },\r\n  buttonText: {\r\n    color: \"#fff\",\r\n    fontWeight: \"bold\",\r\n  },\r\n});\r\n\r\nexport default DomiciliationPricing;\r\n"
        }
    ]
}