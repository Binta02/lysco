{
    "sourceFile": "src/integrations/supabase/client.ts",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1752752253898,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1753082815932,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,16 +1,21 @@\n-// src/integrations/supabase/client.ts\r\n import { createClient } from '@supabase/supabase-js';\r\n+import AsyncStorage from '@react-native-async-storage/async-storage';\r\n import type { Database } from './types';\r\n \r\n const SUPABASE_URL = \"https://ssbcjdlsvtwllumdphwy.supabase.co\";\r\n const SUPABASE_PUBLISHABLE_KEY = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNzYmNqZGxzdnR3bGx1bWRwaHd5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDUzMTIyMDcsImV4cCI6MjA2MDg4ODIwN30.SXieFm0dRtykZBj0rEW0Tcd0-7L1kvlVWmOFeTMEAHQ\";\r\n \r\n-export const supabase = createClient<Database>(SUPABASE_URL, SUPABASE_PUBLISHABLE_KEY, {\r\n-  auth: {\r\n-    persistSession: true,           // sauvegarde la session localement\r\n-    detectSessionInUrl: false,      // désactive recherche dans URL (inutile en mobile)\r\n-  },\r\n-  global: {\r\n-    fetch: fetch,                   // utilise le fetch natif de React Native\r\n-  },\r\n\\ No newline at end of file\n-});\n+export const supabase = createClient<Database>(\r\n+  SUPABASE_URL,\r\n+  SUPABASE_PUBLISHABLE_KEY,\r\n+  {\r\n+    auth: {\r\n+      storage: AsyncStorage,          // ✅ IMPORTANT pour React Native\r\n+      persistSession: true,\r\n+      detectSessionInUrl: false,\r\n+    },\r\n+    global: {\r\n+      fetch: fetch,\r\n+    },\r\n+  }\r\n+);\r\n"
                },
                {
                    "date": 1753088533558,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,21 +1,65 @@\n+// import AsyncStorage from '@react-native-async-storage/async-storage';\r\n+// import { createClient } from '@supabase/supabase-js';\r\n+// import type { Database } from './types';\r\n+\r\n+// const SUPABASE_URL = \"https://ssbcjdlsvtwllumdphwy.supabase.co\";\r\n+// const SUPABASE_PUBLISHABLE_KEY = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNzYmNqZGxzdnR3bGx1bWRwaHd5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDUzMTIyMDcsImV4cCI6MjA2MDg4ODIwN30.SXieFm0dRtykZBj0rEW0Tcd0-7L1kvlVWmOFeTMEAHQ\";\r\n+\r\n+// export const supabase = createClient<Database>(\r\n+//   SUPABASE_URL,\r\n+//   SUPABASE_PUBLISHABLE_KEY,\r\n+//   {\r\n+//     auth: {\r\n+//       storage: AsyncStorage,          // ✅ IMPORTANT pour React Native\r\n+//       persistSession: true,\r\n+//       detectSessionInUrl: false,\r\n+//     },\r\n+//     global: {\r\n+//       fetch: fetch,\r\n+//     },\r\n+//   }\r\n+// );\r\n+\r\n+\r\n import AsyncStorage from '@react-native-async-storage/async-storage';\r\n import { createClient } from '@supabase/supabase-js';\r\n import type { Database } from './types';\r\n \r\n-const SUPABASE_URL = \"https://ssbcjdlsvtwllumdphwy.supabase.co\";\r\n-const SUPABASE_PUBLISHABLE_KEY = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNzYmNqZGxzdnR3bGx1bWRwaHd5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDUzMTIyMDcsImV4cCI6MjA2MDg4ODIwN30.SXieFm0dRtykZBj0rEW0Tcd0-7L1kvlVWmOFeTMEAHQ\";\r\n+const SUPABASE_URL = 'https://ssbcjdlsvtwllumdphwy.supabase.co';\r\n+const SUPABASE_PUBLISHABLE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNzYmNqZGxzdnR3bGx1bWRwaHd5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDUzMTIyMDcsImV4cCI6MjA2MDg4ODIwN30.SXieFm0dRtykZBj0rEW0Tcd0-7L1kvlVWmOFeTMEAHQ';\r\n \r\n export const supabase = createClient<Database>(\r\n   SUPABASE_URL,\r\n   SUPABASE_PUBLISHABLE_KEY,\r\n   {\r\n     auth: {\r\n-      storage: AsyncStorage,          // ✅ IMPORTANT pour React Native\r\n+      storage: AsyncStorage,\r\n       persistSession: true,\r\n       detectSessionInUrl: false,\r\n     },\r\n     global: {\r\n       fetch: fetch,\r\n     },\r\n   }\r\n );\r\n+\r\n+// ✅ Ajout d’une fonction pour créer un client AUTHENTIFIÉ à la volée\r\n+export function getSupabaseClientWithAuth(access_token: string) {\r\n+  return createClient<Database>(\r\n+    SUPABASE_URL,\r\n+    SUPABASE_PUBLISHABLE_KEY,\r\n+    {\r\n+      auth: {\r\n+        storage: AsyncStorage,\r\n+        persistSession: true,\r\n+        detectSessionInUrl: false,\r\n+      },\r\n+      global: {\r\n+        fetch: fetch,\r\n+        headers: {\r\n+          Authorization: `Bearer ${access_token}`,\r\n+        },\r\n+      },\r\n+    }\r\n+  );\r\n+}\r\n"
                },
                {
                    "date": 1753089775224,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,65 +1,21 @@\n-// import AsyncStorage from '@react-native-async-storage/async-storage';\r\n-// import { createClient } from '@supabase/supabase-js';\r\n-// import type { Database } from './types';\r\n-\r\n-// const SUPABASE_URL = \"https://ssbcjdlsvtwllumdphwy.supabase.co\";\r\n-// const SUPABASE_PUBLISHABLE_KEY = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNzYmNqZGxzdnR3bGx1bWRwaHd5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDUzMTIyMDcsImV4cCI6MjA2MDg4ODIwN30.SXieFm0dRtykZBj0rEW0Tcd0-7L1kvlVWmOFeTMEAHQ\";\r\n-\r\n-// export const supabase = createClient<Database>(\r\n-//   SUPABASE_URL,\r\n-//   SUPABASE_PUBLISHABLE_KEY,\r\n-//   {\r\n-//     auth: {\r\n-//       storage: AsyncStorage,          // ✅ IMPORTANT pour React Native\r\n-//       persistSession: true,\r\n-//       detectSessionInUrl: false,\r\n-//     },\r\n-//     global: {\r\n-//       fetch: fetch,\r\n-//     },\r\n-//   }\r\n-// );\r\n-\r\n-\r\n import AsyncStorage from '@react-native-async-storage/async-storage';\r\n import { createClient } from '@supabase/supabase-js';\r\n import type { Database } from './types';\r\n \r\n-const SUPABASE_URL = 'https://ssbcjdlsvtwllumdphwy.supabase.co';\r\n-const SUPABASE_PUBLISHABLE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNzYmNqZGxzdnR3bGx1bWRwaHd5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDUzMTIyMDcsImV4cCI6MjA2MDg4ODIwN30.SXieFm0dRtykZBj0rEW0Tcd0-7L1kvlVWmOFeTMEAHQ';\r\n+const SUPABASE_URL = \"https://ssbcjdlsvtwllumdphwy.supabase.co\";\r\n+const SUPABASE_PUBLISHABLE_KEY = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNzYmNqZGxzdnR3bGx1bWRwaHd5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDUzMTIyMDcsImV4cCI6MjA2MDg4ODIwN30.SXieFm0dRtykZBj0rEW0Tcd0-7L1kvlVWmOFeTMEAHQ\";\r\n \r\n export const supabase = createClient<Database>(\r\n   SUPABASE_URL,\r\n   SUPABASE_PUBLISHABLE_KEY,\r\n   {\r\n     auth: {\r\n-      storage: AsyncStorage,\r\n+      storage: AsyncStorage,          // ✅ IMPORTANT pour React Native\r\n       persistSession: true,\r\n       detectSessionInUrl: false,\r\n     },\r\n     global: {\r\n       fetch: fetch,\r\n     },\r\n   }\r\n );\r\n-\r\n-// ✅ Ajout d’une fonction pour créer un client AUTHENTIFIÉ à la volée\r\n-export function getSupabaseClientWithAuth(access_token: string) {\r\n-  return createClient<Database>(\r\n-    SUPABASE_URL,\r\n-    SUPABASE_PUBLISHABLE_KEY,\r\n-    {\r\n-      auth: {\r\n-        storage: AsyncStorage,\r\n-        persistSession: true,\r\n-        detectSessionInUrl: false,\r\n-      },\r\n-      global: {\r\n-        fetch: fetch,\r\n-        headers: {\r\n-          Authorization: `Bearer ${access_token}`,\r\n-        },\r\n-      },\r\n-    }\r\n-  );\r\n-}\r\n"
                }
            ],
            "date": 1752752253898,
            "name": "Commit-0",
            "content": "// src/integrations/supabase/client.ts\r\nimport { createClient } from '@supabase/supabase-js';\r\nimport type { Database } from './types';\r\n\r\nconst SUPABASE_URL = \"https://ssbcjdlsvtwllumdphwy.supabase.co\";\r\nconst SUPABASE_PUBLISHABLE_KEY = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNzYmNqZGxzdnR3bGx1bWRwaHd5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDUzMTIyMDcsImV4cCI6MjA2MDg4ODIwN30.SXieFm0dRtykZBj0rEW0Tcd0-7L1kvlVWmOFeTMEAHQ\";\r\n\r\nexport const supabase = createClient<Database>(SUPABASE_URL, SUPABASE_PUBLISHABLE_KEY, {\r\n  auth: {\r\n    persistSession: true,           // sauvegarde la session localement\r\n    detectSessionInUrl: false,      // désactive recherche dans URL (inutile en mobile)\r\n  },\r\n  global: {\r\n    fetch: fetch,                   // utilise le fetch natif de React Native\r\n  },\r\n});"
        }
    ]
}